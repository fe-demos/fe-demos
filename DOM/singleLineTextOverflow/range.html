<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>range</title>
        <style>
            .container {
                width: 100px;
                background-color: lightblue;
                overflow: hidden;
                white-space: nowrap;
                text-overflow: ellipsis;
            }
        </style>
    </head>
    <body>
        <div class="container">
            这是一段很长长长长长长长长长长长长长长长长长长长长长长长长长长长长长长长长长长的文字
        </div>
        <input type="range" min="100" , max="1000" /> <span class="width">100</span> <br />
        <output class="result"></output>
        <script>
            /** @type {HTMLDivElement} */
            const container = document.querySelector('.container');
            const textSpan = document.querySelector('.text');
            const output = document.querySelector('output');
            const textNode = container.firstChild;
            function checkOverflow() {
                const range = new Range();
                range.setStart(textNode, 0);
                range.setEnd(textNode, textNode.data.length);
                output.textContent =
                    (range.getBoundingClientRect().width > container.clientWidth ? '' : '没') +
                    '溢出';
            }
            checkOverflow();

            const input = document.querySelector('input');
            const widthSpan = document.querySelector('.width');
            input.addEventListener('change', () => {
                const width = input.value;
                container.style.width = width + 'px';
                widthSpan.textContent = width;
                checkOverflow();
            });
        </script>
    </body>
</html>
